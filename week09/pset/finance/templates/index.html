{% extends "layout.html" %}

{% block title %}
Homepage
{% endblock %}

{% block main %}

<div class="container">
  <h3>Homepage</h3>
</div>

<div class="container">
  <div class="row">
    <div class="col text-start">
      <span class="user-info fs-6 fw-normal">username</span><br>
      <span class="fs-4 fw-medium">{{ username }}</span><br><br>
      <span class="user-info fs-6 fw-normal">cash</span><br>
      <span class="fs-4 fw-medium">{{ cash | usd }}</span><br><br>
      <span class="user-info fs-6 fw-normal">liquid</span><br>
      <span class="fs-4 fw-medium">{{ liquid | usd }}</span><br>
    </div>
    {% if table_data %}
    <div class="col">
      <table class="table">
        <thead>
          <tr>
            <th>Stock Name</th>
            <th>Total Shares</th>
            <th>Stock Value</th>
            <th>Total</th>
            <th colspan="2"></th>
          </tr>
        </thead>
        <tbody>
          {% for stock, response, total in table_data %}
          <tr>
            <td>{{ stock["stock_name"] }}</td>
            <td>{{ stock["total_shares"] }}</td>
            <td>{{ (response["price"]) | usd }}</td>
            <td>{{ total | usd }}</td>
            <td><a href="{{ url_for('buy') }}?symbol={{ stock['stock_name'] }}" class="btn btn-primary">Buy</a></td>
            <td><a href="{{ url_for('sell') }}?symbol={{ stock['stock_name'] }}" class="btn btn-primary">Sell</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}